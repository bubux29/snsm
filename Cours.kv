# -*- coding: utf-8 -*-
#: import CalendarWidget KivyCalendar
#: import ComboEdit ComboEdit
#: import PopupList liste_popup

<MenuBouton@Button>:
    size_hint: (.5,1)
    pos_hint: { 'center_x': .5 }
    canvas:
        Line:
            rectangle: self.x+1,self.y+1,self.width-1,self.height-1

<CoursRetourBox>:
    bl: bl
    retour: bl.retour
    BoxLayout:
        id: bl
        retour: retour
        orientation: 'horizontal'
        Button:
            text: 'Accueil'
            id: retour
            on_press:
                root.retour_accueil(self)
        Button:
            text: 'Formation'
            on_press:
                root.manager.transition.direction = 'right'
                root.manager.current = root.titre

[CoursTopLayout@CoursRetourBox]:
    size_hint: (.5,.2)
    pos_hint: {'top': 1, 'right': .5}


<CoursGroupeExistant>:
    retour: retour
    bl: bl
    BoxLayout:
        orientation: 'vertical'
        CoursTopLayout:
            id: retour
        GridLayout:
            orientation: 'horizontal'
            cols: 3
            id: bl
            Label:
                text: 'Groupes stagiaires'
                size_hint: (1, .1)
            Label:
                text: 'Sélectionner les présents'
                size_hint: (1, .1)
            Label:
                text: 'Sélectionner les anciens'
                size_hint: (1, .1)
        Button:
            text: 'OK'
            size_hint: (.1,.1)
            pos_hint: {'top': 1, 'right': .8}
            on_press:
                root.on_selection()

<CoursGroupeNouveau>:
    bouton_choix_cours: bouton_choix_cours
    bouton_choix_eleves: bouton_choix_eleves
    retour: retour
    BoxLayout:
        orientation: 'vertical'
        CoursTopLayout:
            id: retour
        Label:
            titre: "Création d'un nouveau groupe"
            #size_hint: (.5, None)
            pos_hint: {'right': .5}
        GridLayout:
            orientation: 'horizontal'
            pos_hint: {'top': 1}
            cols: 2
            id: gd
            #bouton_choix_cours: bouton_choix_cours
            Label:
                text: 'Nom du nouveau groupe'
            TextInput:
                multiline: False
            Label:
                text: 'Cours relatif'
            Button:
                text: 'Liste des cours'
                id: bouton_choix_cours
            Label:
                text: 'Eleves'
            Button:
                text: 'Liste des élèves'
                id: bouton_choix_eleves
            #PopupList:
                #text: root.titre
                #id: choix_cours
            #ComboEdit:
                #text: root.titre
                #size_hint: .3,.3
                #pos_hint: {'center': (.5,.5)}
                #options:
                    #[Button(text=str(x), size_hint_y=None, height=30) for x in formation_db.liste_cours_all()]
        Widget:

<CoursChoixGroupe>:
    existant: existant
    nouveau: nouveau
    retour: retour
    BoxLayout:
        orientation: 'vertical'
        CoursTopLayout:
            id: retour
        MenuBouton:
            text: 'Sélection des groupes du jour'
            id: existant
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'ex'
        MenuBouton:
            text: 'Création d\'un nouveau groupe'
            id: nouveau
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'ng'

<CoursChoixGroupe_>:
    existant: bx.existant
    temporaire: bx.temporaire
    nouveau: bx.nouveau
    retour: bx.retour
    BoxLayout:
        # Objets
        id: bx
        existant: existant
        temporaire: temporaire
        nouveau: nouveau
        retour: bl.retour
        # Caractéristiques
        orientation: 'vertical'
        spacing: 10
        BoxLayout:
            id: bl
            retour: retour
            size_hint: (.5,.2)
            pos_hint: {'top': 1, 'right': .5}
            orientation: 'horizontal'
            Button:
                text: 'Accueil'
                id: retour
            Button:
                text: 'Formation'
                on_press:
                    root.manager.transition.direction = 'right'
                    root.manager.current = root.titre
        MenuBouton:
            text: 'Choix d\'un groupe existant'
            id: existant
        MenuBouton:
            text: 'Création d\'un groupe pour la journée'
            id: temporaire
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'ng'
        MenuBouton:
            text: 'Création d\'un nouveau groupe'
            id: nouveau

<CoursFormation>:
    date: gd.date
    GridLayout:
        id: gd
        date: date
        cols: 2
        Label:
            text: 'Date du début de la journée de formation :'
        DatePicker:
            id: date
            multiline: 'False'
            size_hint: None, .1
            pHint: 0.4, 0.4
        
<MainCoursMenu>:
    BoxLayout:
        spacing: 10
        orientation: 'vertical'
        size_hint: (.9, 1)
        pos_hint: {'center_x': .5}
        Button:
            id: retour
            text: 'Retour'
            size_hint: .2, .2
            pos_hint: {'center_x': .5}
            on_press:
                root.retour_accueil
        Button:
            text: "Démarrer une mise en situation"
            id: demarrer_formation
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'ex'
        Button:
            text: "Consulter les évaluations"
            id: consulter_evaluation
            on_press:
                root.manager.transition.direction = 'left'
                root.manager.current = 'ce'
